{% extends "emails/base_email.html" %}

{% block content %}

<table role="presentation" width="100%" cellpadding="0" cellspacing="0"
    style="font-family: Arial, Helvetica, sans-serif; background-color:#f4f6f9; padding:30px 0;">

    <tr>
        <td align="center">

            <!-- Main Container -->
            <table role="presentation" width="600" cellpadding="0" cellspacing="0"
                style="background:#ffffff; border-radius:10px; overflow:hidden; box-shadow:0 4px 18px rgba(0,0,0,0.08);">

                <!-- HEADER -->
                <tr>
                    <td style="background:#1e293b; padding:22px 30px; color:#ffffff;">
                        <h2 style="margin:0; font-size:22px;">Academic Monitoring & Mentorship System</h2>
                        <p style="margin:5px 0 0 0; font-size:13px; color:#cbd5e1;">
                            Department of Engineering
                        </p>
                    </td>
                </tr>

                <!-- GREETING -->
                <tr>
                    <td style="padding:30px 30px 10px 30px; color:#334155; font-size:15px;">
                        Dear <strong>{{ student.user.first_name|default:"Student" }}</strong>,
                    </td>
                </tr>

                <!-- ALERT STATUS CARD -->
                <tr>
                    <td style="padding:0 30px 10px 30px;">

                        <table width="100%" cellpadding="0" cellspacing="0"
                            style="border-radius:8px; overflow:hidden; border:1px solid #e2e8f0;">

                            <!-- Status Header -->
                            <tr>
                                <td style="padding:14px 18px; background:{{ border_color|default:'#dc2626' }}; color:white; font-size:16px; font-weight:bold;">
                                    {% if status == 'CRITICAL' %}
                                        ⚠️ Critical Attendance Shortage
                                    {% elif status == 'MODERATE' %}
                                        ⚠️ Attendance Warning
                                    {% else %}
                                        ⭐ Attendance Notice
                                    {% endif %}
                                </td>
                            </tr>

                            <!-- Body -->
                            <tr>
                                <td style="padding:18px; font-size:15px; color:#334155; line-height:1.6;">
                                    {{ message_body|default:"Your attendance percentage is below the institutional requirement." }}
                                </td>
                            </tr>

                        </table>

                    </td>
                </tr>

                <!-- MESSAGE -->
                <tr>
                    <td style="padding:15px 30px; color:#475569; font-size:15px; line-height:1.6;">
                        As per institutional academic regulations, students must maintain a minimum attendance
                        percentage to remain eligible for examinations and internal assessments.
                        Kindly review your attendance status below:
                    </td>
                </tr>

                <!-- ATTENDANCE TABLE -->
                <tr>
                    <td style="padding:0 30px;">
                        <table width="100%" cellpadding="0" cellspacing="0"
                            style="border:1px solid #e2e8f0; border-radius:6px; overflow:hidden;">

                            <tr style="background:#f1f5f9;">
                                <th align="left" style="padding:12px; font-size:14px; color:#334155;">Detail</th>
                                <th align="right" style="padding:12px; font-size:14px; color:#334155;">Value</th>
                            </tr>

                            <tr>
                                <td style="padding:12px; border-top:1px solid #e2e8f0;">Current Attendance</td>
                                <td align="right"
                                    style="padding:12px; border-top:1px solid #e2e8f0; font-size:18px;">
                                    
                                    <span style="
                                        background:#fee2e2;
                                        color:#b91c1c;
                                        padding:6px 12px;
                                        border-radius:6px;
                                        font-weight:bold;
                                        display:inline-block;
                                        min-width:70px;
                                        text-align:center;">
                                        {{ percentage|default:0|floatformat:2 }}%
                                    </span>

                                </td>
                            </tr>

                            <tr>
                                <td style="padding:12px; border-top:1px solid #e2e8f0;">Required Threshold</td>
                                <td align="right" style="padding:12px; border-top:1px solid #e2e8f0; font-weight:bold;">
                                    75.00%
                                </td>
                            </tr>

                        </table>
                    </td>
                </tr>

                <!-- ACTION STEPS -->
                <tr>
                    <td style="padding:25px 30px 10px 30px;">

                        <table width="100%" cellpadding="0" cellspacing="0"
                            style="background:#f8fafc; border:1px solid #e2e8f0; border-radius:8px;">
                            <tr>
                                <td style="padding:18px; color:#334155; font-size:15px;">

                                    <strong style="color:#0f172a;">Required Immediate Actions:</strong>

                                    <ul style="margin:12px 0 0 18px; line-height:1.8;">
                                        <li>Attend all remaining classes without absence.</li>
                                        <li>Meet your faculty mentor within 3 working days.</li>
                                        <li>Submit valid leave proof (if any) to department office.</li>
                                        <li>Monitor your attendance weekly through the student portal.</li>
                                    </ul>

                                </td>
                            </tr>
                        </table>

                    </td>
                </tr>

                <!-- SIGNATURE -->
                <tr>
                    <td style="padding:25px 30px 35px 30px; color:#334155; font-size:15px;">
                        Regards,<br><br>
                        <strong>Head of Department</strong><br>
                        Academic Monitoring Cell<br>
                        <span style="color:#64748b; font-size:13px;">
                            This is an official academic notification generated by the Academic Monitoring System.
                            For clarification, contact your department office or faculty mentor.
                        </span>
                    </td>
                </tr>

                <!-- FOOTER -->
                <tr>
                    <td style="background:#f1f5f9; padding:15px 30px; text-align:center; font-size:12px; color:#64748b;">
                        © {{ year|default:"2026" }} Academic Monitoring & Mentorship System
                    </td>
                </tr>

            </table>
        </td>
    </tr>
</table>

{% endblock %}
